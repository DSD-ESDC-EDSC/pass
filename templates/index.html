<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <!-- Title and description tags-->
      <title>PASS</title>
      <meta name="description" content="TBD"/>
    <!-- Device META tags-->
      <meta content="width=device-width,initial-scale=1" name="viewport"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- Favicon Icon -->
      <link rel="apple-touch-icon" sizes="57x57 72x72 114x114 144x144 150x150" href="static/images/favicon-mobile.png" class="wb-favicon" />
      <link href="static/images/favicon.ico" rel="icon" type="image/x-icon" class="wb-init wb-favicon-inited"/>

    <!-- Font CSS-->
      <link rel="stylesheet" href="static/stylesheets/font.css" />

    <!--External Scripts and CSS-->
      <!-- Jquery -->
      <script src="static/javascripts/external/jquery-3.3.1.min.js"></script>
      <!-- WET + CDO design Kit -->
      <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
      <link rel="stylesheet" href="static/stylesheets/WET/theme.css"/>
      <link rel="stylesheet" href="static/stylesheets/CDO-theme.css"/>
      <!-- <script src="http://10.56.49.141:3099/cdk.js"></script> -->
      <script src="static/javascripts/external/selectize.min.js"></script>
      <!-- Font Awesome 5 -->
      <script defer src="https://use.fontawesome.com/releases/v5.12.0/js/all.js"></script>
      <!-- Leaflet -->
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
      <!-- Leaflet Search -->
      <link rel="stylesheet" href="static/javascripts/external/leaflet-search/src/leaflet-search.css">
      <script src="static/javascripts/external/leaflet-search/src/leaflet-search.js"></script>
      <!-- Leaflet Cluster -->
      <link rel="stylesheet" href="static/javascripts/external/leaflet-search/dist/MarkerCluster.css">
      <link rel="stylesheet" href="static/javascripts/external/leaflet-search/dist/MarkerCluster.Default.css">
      <script src="static/javascripts/external/Leaflet.markercluster-1.4.1/dist/leaflet.markercluster-src.js"></script>
      <!-- <link rel="stylesheet" href="static/javascripts/external/Leaflet.ExtraMarkers/dist/css/leaflet.extra-markers.min.css">  -->
      <!-- <script src="static/javascripts/external/Leaflet.ExtraMarkers/dist/js/leaflet.extra-markers.min.js"></script> -->
      <!-- Chroma.js -->
      <script src="static/javascripts/external/chroma.min.js"></script>
      <!-- Geo Stats for Classification -->
      <script src="/static/javascripts/external/geostats.js"></script>
      <!--Interal Scripts and CSS -->
      <link rel="stylesheet" href="static/stylesheets/index.css" />
      <script src="/static/javascripts/download.js"></script>
      <script src="/static/javascripts/map.js"></script>
      <script src="/static/javascripts/index.js"></script>

      <script>
        var poi = JSON.parse({{ poi | tojson }});
        console.log(poi)


      </script>
  </head>
  <body>
    <div id="navbar">
     <a id="logo" class="col-lg-5">PASS</a>
     <a id="help" class="wb-lbx" href="#popup-modal-help" aria-controls="popup-modal" role="button">Help</a>
     <a id="about" class="wb-lbx" href="#popup-modal-about" aria-controls="popup-modal" role="button">About</a>
     <a id="menu-toggle-navbar" class="wb-lbx" aria-controls="popup-modal" role="button">Menu</a>
    </div>
    <div id="map"></div>
    <div id="legend"></div>
    <div id="map-tools" class="col-lg-12"></div>
    <div id="menu">
     <div id="menu-toggle"><i class="fa fa-times"></i></div>
     <p>Welcome to the <strong>P</strong>otential <strong>A</strong>ccessibility <strong>S</strong>oftware <strong>S</strong>ervice, <strong>PASS</strong>, a tool that measures spatial accessibility. Pan and zoom to your area of interest, change the parameters below, and submit to calculate accessibility scores. To learn more about the methodology, checkout <a class="wb-lbx" href="#popup-modal-about" aria-controls="popup-modal" role="button">About</a></p>
     <p>
        <label><i class="fa fa-info-circle" title="Select the commute method."></i> Mode of transportation</label>
        <select id="transportation" class="single-selects selectize-input items full has-options has-items">
          <option value="car">Car</option>
          <option value="public transit" disabled>Public Transit</option>
        </select>
     </p>
     <p>
       <label><i class="fa fa-info-circle" title="Select the max distance clients are willing to travel to the service. Consider mode of transportation."></i> Distance Travel Threshold: <label id="threshold-value">10</label> km</label>
       <div class="slidecontainer">
          <label>0</label>
          <label>70</label>
          <input type="range" min="0" max="70" value="10" class="slider" id="threshold">
       </div>
    </p>
    <p>
       <label><i class="fa fa-info-circle" title="Select how willing clients are to travel further distance."></i> Willingness to Commute</label>
       <select id="beta" class="single-selects selectize-input items full has-options has-items">
         <option value="1.5">Less</option>
         <option value="1.0">Medium</option>
         <option value="0.5">More</option>
       </select>
    </p>
    <p>
      <label><i class="fa fa-info-circle" title="Select the variable to represent the population demand."></i> Population Group</label>
      <select id="demand" class="single-selects selectize-input items full has-options has-items">
        {% for key, val in demand_cols.items() %}
        <option value="{{key}}">{{val}}</option>
        {% endfor %}
      </select>
    </p>
    <p>
      <label><i class="fa fa-info-circle" title="Select the variable to represent the supply of the service locations (POIs) that meets the demand."></i> POI Supply</label>
      <select id="supply" class="single-selects selectize-input items full has-options has-items">
        {% for key, val in supply_cols.items() %}
        <option value="{{key}}">{{val}}</option>
        {% endfor %}
      </select>
    </p>
    <p>
      <label><i class="fa fa-info-circle" title="Select the variable to represent the capacity of the service locations (POIs) that would influences the likelihood of demand going to the POI."></i> POI Capacity</label>
      <select id="capacity" class="single-selects selectize-input items full has-options has-items">
        {% for key, val in capacity_cols.items() %}
        <option value="{{key}}">{{val}}</option>
        {% endfor %}
      </select>
    </p>

  <button id="model" class="btn popup col-lg-12">Measure Spatial Accessibility</button>
  </div>
  <div id="toolbar"></div>
  <section class="mfp-hide modal-content modal-dialog overlay-def modal-width" id="popup-modal-about">
      <header class="modal-header">
        <h2 class="modal-title">About PASS</h2>
      </header>
      <div class="modal-body">
        <h3>Methodology</h3>
        <p> The CDO Data Science team developed a geographic information system, Potential Accessibility Software Service (PASS). PASS offers an advanced quantitative approach to measure how spatially accessible population demand is to a given service. </p>
        <p> Spatial accessibility is the consideration of how physical and social space and place affect how a population can traverse through it to access a given service. Though abstract in nature, it can be measured through considerations like where potential population demand is located, the geographic distance to get from the population location to the service locations offered, the supply at the service locations, as well as the probability of a population going to one service location over another based on the capacity. PASS uses the enhanced 3-step floating catchment methodology to accomplish this, which is further explained <a href="static/docs/pass_report_20200422.html" target="_blank">here</a>.</p>
        <p>PASS lets you select a geographic area of interest by panning and zooming on the interactive map, and lets you define the parameters to model spatial accessibility to better reflect Canada's diverse society. For example, individuals living in urban areas versus rural areas, have different assumptions and considerations for how to access a service.</p>
        <h3>Developers</h3>
        <ul>
          <li>Julia Conzon</li>
          <li>Chelsea Ernhofers</li>
        </ul>
      </div>
    </section>

    <section class="mfp-hide modal-content modal-dialog overlay-def modal-width" id="popup-modal-help">
      <header class="modal-header">
        <h2 class="modal-title">Help</h2>
      </header>
      <div class="modal-body">
        <h3>Why when I zoom in/out the accessibility scores have a different geographic area?</h3>
        <p> 
          The methodology used to measure spatial accessibility considers the network of both the services and the surrounding population demand, thus when you zoom in/out of a location, PASS takes all data points within the window of your screen and measures scores based on that network. When you zoom in/out the number of service locations and demand locations change!
        </p>
        <h3></h3>
      </div>
    </section>
    <!-- WET JS part -->
    <script src="static/javascripts/WET/wet-boew.js"></script>
    <script src="static/javascripts/WET/theme.js"></script>
    <script src="static/javascripts/CDO-theme.js"></script>
  </body>
</html>
